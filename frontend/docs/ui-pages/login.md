# Страница входа

## Назначение
Вход существующего пользователя в систему.

## Путь
`/login`

## Доступ
- Только для неавторизованных пользователей
- Если пользователь залогинен → redirect на `/`

---

## Структура страницы

### Шапка
- Логотип Felend

### Основной контент

**Заголовок:**
- "Вход в аккаунт"

**OAuth вход:**
- Кнопка "Войти через Google"
  - Иконка Google слева
  - Полная ширина
  - Стиль: outlined

**Разделитель:**
- Линия с текстом "или" по центру

**Форма входа:**

1. **Email**
   - Label: "Email"
   - Type: email
   - Placeholder: "example@mail.com"
   - Required
   - Автофокус на это поле

2. **Пароль**
   - Label: "Пароль"
   - Type: password
   - Placeholder: "Введите пароль"
   - Required
   - Иконка показать/скрыть пароль

**Дополнительные опции:**
- Checkbox "Запомнить меня" (опционально)
- Ссылка "Забыли пароль?" (справа)

**Кнопка отправки:**
- Текст: "Войти"
- Полная ширина
- Primary стиль

### Футер

**Переход на регистрацию:**
- Текст: "Нет аккаунта?"
- Ссылка: "Зарегистрироваться"
- Центрирован

---

## Состояния

### 1. Начальное состояние
- Поля пусты
- Фокус на поле Email
- Кнопка "Войти" активна

### 2. Заполнение формы
- Валидация только при отправке (не при вводе)
- Можно отправить пустую форму → покажем ошибки

### 3. Отправка формы (Loading)
- Кнопка показывает loader
- Текст: "Вход..."
- Форма disabled

### 4. Успешный вход
- Сохраняем JWT токен в localStorage/cookie
- Redirect на `/` (главную страницу)
- Показываем краткое уведомление "Добро пожаловать!"

### 5. Ошибки

**Email не подтвержден:**
- Alert: "Email не подтвержден. Проверьте почту"
- Кнопка "Отправить письмо повторно"

**Неверный email или пароль:**
- Alert под формой: "Неверный email или пароль"
- Подсветить оба поля красным

**Ошибка сервера:**
- Alert: "Ошибка сервера. Попробуйте позже"

---

## Валидация

### На клиенте (перед отправкой)
- Email не пустой
- Пароль не пустой

### На сервере
- Проверка существования пользователя
- Проверка пароля (hash)
- Проверка подтверждения email

---

## OAuth вход через Google

### Процесс
1. Нажатие "Войти через Google"
2. OAuth popup
3. Выбор аккаунта
4. Redirect обратно
5. Бекенд ищет пользователя с этим Google ID
   - Найден → логиним
   - Не найден → создаем нового (автоматическая регистрация)
6. JWT токен
7. Redirect на `/`

---

## Забыли пароль

**Процесс:**
1. Нажатие "Забыли пароль?"
2. Redirect на `/forgot-password`
3. Ввод email
4. Отправка письма с ссылкой для сброса
5. Переход по ссылке
6. Ввод нового пароля
7. Redirect на `/login`

*(Страницу `/forgot-password` создадим отдельно)*

---

## Адаптация для Desktop

- Контент в центре в карточке (max-width: 400px)
- Иллюстрация слева (опционально)
- Форма справа

---

## UI компоненты
- `TextField`
- `Button` (Primary, OAuth)
- `Checkbox`
- `Link`
- `Divider`
- `Alert` / `Snackbar`

---

## Технические детали

### Данные для отправки
```json
{
  "email": "user@example.com",
  "password": "password123",
  "remember_me": true
}
```

### Ответ сервера (успех)
```json
{
  "access_token": "jwt_token_here",
  "refresh_token": "refresh_token_here",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "John Doe",
    "balance": 10
  }
}
```

### Ответ сервера (ошибка)
```json
{
  "error": "invalid_credentials",
  "message": "Неверный email или пароль"
}
```

---

## Security
- Пароль всегда type="password"
- HTTPS обязательно
- JWT токен в httpOnly cookie (если возможно)
- Защита от CSRF

---

## SEO
- Title: "Вход | Felend"
- Meta description: "Войдите в свой аккаунт Felend"
- Canonical URL: `https://felend.app/login`

---

## Примечания
- Простой и быстрый вход - приоритет
- Google OAuth - основной способ входа
- Email/пароль - альтернатива
