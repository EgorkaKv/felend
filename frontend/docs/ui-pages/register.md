# Страница регистрации

## Назначение
Регистрация нового пользователя на платформе.

## Путь
`/register`

## Доступ
- Только для неавторизованных пользователей
- Если пользователь залогинен → redirect на `/`

---

## Структура страницы

### Шапка
- Логотип Felend (по центру или слева)
- Кнопка "Назад" (если пришли с онбординга)

### Основной контент

**Заголовок:**
- "Создать аккаунт"

**OAuth регистрация:**
- Кнопка "Зарегистрироваться через Google"
  - Иконка Google слева
  - Полная ширина
  - Стиль: outlined или с легким фоном

**Разделитель:**
- Линия с текстом "или" по центру

**Форма регистрации:**

1. **Email**
   - Label: "Email"
   - Type: email
   - Placeholder: "example@mail.com"
   - Required
   - Валидация: формат email

2. **Пароль**
   - Label: "Пароль"
   - Type: password
   - Placeholder: "Минимум 8 символов"
   - Required
   - Иконка показать/скрыть пароль справа
   - Валидация: минимум 8 символов

3. **Подтверждение пароля**
   - Label: "Повторите пароль"
   - Type: password
   - Placeholder: "Повторите пароль"
   - Required
   - Валидация: совпадение с паролем

**Кнопка отправки:**
- Текст: "Зарегистрироваться"
- Полная ширина
- Primary стиль
- Disabled пока форма не валидна

**Дополнительная информация:**
- Текст: "Регистрируясь, вы соглашаетесь с [Условиями использования](#) и [Политикой конфиденциальности](#)"
- Мелкий шрифт, центрирован

### Футер

**Переход на вход:**
- Текст: "Уже есть аккаунт?"
- Ссылка: "Войти"
- Центрирован

---

## Состояния

### 1. Начальное состояние
- Все поля пусты
- Кнопка "Зарегистрироваться" disabled
- Нет сообщений об ошибках

### 2. Заполнение формы
- Real-time валидация при потере фокуса (onBlur)
- Показываем ошибки под полями красным цветом
- Кнопка активируется когда все поля валидны

### 3. Отправка формы (Loading)
- Кнопка показывает loader (спиннер)
- Текст: "Регистрация..."
- Форма disabled
- Нельзя повторно отправить

### 4. Успешная регистрация
- Redirect на `/confirm-email`
- Передаем email в state для отображения

### 5. Ошибка
- Показываем alert/snackbar с ошибкой
- Возможные ошибки:
  - "Email уже используется" → подсветить поле email
  - "Ошибка сервера, попробуйте позже"
- Форма снова активна
- Можно исправить и отправить заново

---

## Валидация полей

### Email
**Правила:**
- Обязательное поле
- Формат email (regex)
- Максимум 255 символов

**Сообщения об ошибках:**
- Пусто: "Email обязателен"
- Неверный формат: "Введите корректный email"

### Пароль
**Правила:**
- Обязательное поле
- Минимум 8 символов
- Максимум 128 символов

**Сообщения об ошибках:**
- Пусто: "Пароль обязателен"
- Короткий: "Минимум 8 символов"

### Подтверждение пароля
**Правила:**
- Обязательное поле
- Совпадает с паролем

**Сообщения об ошибках:**
- Пусто: "Подтвердите пароль"
- Не совпадает: "Пароли не совпадают"

---

## OAuth регистрация через Google

### Процесс
1. Пользователь нажимает "Зарегистрироваться через Google"
2. Открывается popup OAuth Google
3. Пользователь выбирает аккаунт и разрешает доступ
4. Redirect обратно в приложение
5. Бекенд создает аккаунт или логинит существующего
6. JWT токен сохраняется
7. Redirect на `/` (главную)

### Обработка ошибок OAuth
- Пользователь отменил → ничего не происходит, остаемся на `/register`
- Ошибка сервера → показываем snackbar с ошибкой

---

## Адаптация для Desktop

**Изменения:**
- Контент в центре экрана в карточке (max-width: 400px)
- Добавляем иллюстрацию слева (50% экрана)
- Форма справа (50% экрана)

---

## UI компоненты
- `TextField` - поле ввода с валидацией
- `Button` (Primary)
- `Button` (OAuth) - кнопка с иконкой Google
- `Link` - ссылка на страницу входа
- `Divider` - разделитель с текстом
- `Alert` / `Snackbar` - для ошибок

---

## Accessibility
- Все поля имеют labels
- Ошибки связаны с полями через aria-describedby
- Можно пройти форму с клавиатуры (Tab)
- Enter для отправки формы
- Focus states для всех интерактивных элементов

---

## Технические детали

### Данные для отправки (API)
```json
{
  "email": "user@example.com",
  "password": "securepassword"
}
```

### Ответ сервера (успех)
```json
{
  "message": "Пользователь создан. Подтвердите email",
  "email": "user@example.com"
}
```

### Ответ сервера (ошибка)
```json
{
  "error": "Email уже используется"
}
```

---

## SEO
- Title: "Регистрация | Felend"
- Meta description: "Создайте аккаунт на Felend и начните собирать ответы для своих исследований"
- Canonical URL: `https://felend.app/register`

---

## Примечания
- Пароль не показываем при вводе (security)
- Email сохраняем в lowercase
- После регистрации отправляем письмо с подтверждением
- Токен не выдаем до подтверждения email (если регистрация через email/пароль)
